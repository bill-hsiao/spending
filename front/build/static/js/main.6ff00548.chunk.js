(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,n){e.exports=n(52)},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(22),o=n(7),c=n(6),i=n(15),u=n(32),l=n(33),h=n(20),p=n.n(h),m=n(26),g=n(27),d=n.n(g),b=n(4),f=Object(b.a)();var v="SIGNUP_BEGIN",O="SIGNUP_SUCCESS",j="SIGNUP_FAIL",y="LOGIN_BEGIN",E="LOGIN_SUCCESS",S="LOGIN_FAIL",C="USERS_LOGOUT";function w(e){if(console.log(e),!e.ok||"No Content"===e.statusText)throw Error(e.statusText);return e}var N=JSON.parse(localStorage.getItem("user")),x=N?{loggedIn:!0,user:N}:{};var I=Object(i.c)({registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case v:return{registering:!0};case O:case j:return{};default:return e}},authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return{loggingIn:!0,user:t.payload.user};case E:return{loggedIn:!0,user:t.payload.user};case S:case C:return{};default:return e}}}),k=Object(l.createLogger)(),L=Object(i.d)(I,Object(i.a)(u.a,k,function(e){return function(t){return function(n){var a=t(n);return console.log("next state",e.getState()),a}}})),G=n(10),T=n(11),U=n(13),_=n(12),J=n(14),P=n(16),A=n(34),B=function(e){var t=e.component,n=Object(A.a)(e,["component"]);return r.a.createElement(P.b,Object.assign({},n,{render:function(e){return localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(P.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},R=function(e){function t(){return Object(G.a)(this,t),Object(U.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement("div",null,"Hello, ",e.firstName,"!",r.a.createElement(c.b,{to:"/login"},"Logout"))}}]),t}(r.a.Component);var D=Object(o.b)(function(e){return{user:e.authentication.user}})(R),F=n(17),H=n(24),q=n(8),z=function(e){function t(e){var n;return Object(G.a)(this,t),(n=Object(U.a)(this,Object(_.a)(t).call(this,e))).state={user:{firstName:"",lastName:"",username:"",password:""},submitted:!1},n.handleChange=n.handleChange.bind(Object(q.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(q.a)(n)),n}return Object(J.a)(t,e),Object(T.a)(t,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.user;console.log(r),this.setState({user:Object(H.a)({},r,Object(F.a)({},n,a))})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.user;t.firstName&&t.lastName&&t.username&&t.password&&this.props.dispatch(function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return function(){var n=Object(m.a)(p.a.mark(function n(a){var r;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:v}),n.prev=1,n.next=4,d()("".concat(window.location.origin,"/users/register"),t).then(w);case 4:return r=n.sent,n.next=7,r.json();case 7:(e=n.sent)&&(a({type:O}),f.push("/login")),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),console.log(n.t0),a({type:j});case 15:case"end":return n.stop()}},n,null,[[1,11]])}));return function(e){return n.apply(this,arguments)}}()}(t))}},{key:"render",value:function(){this.props.registering;var e=this.state.user;return r.a.createElement("div",null,r.a.createElement("h1",null,"Register"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"firstName",value:e.firstName,placeholder:"firstName",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"lastName",value:e.lastName,placeholder:"lastName",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"username",value:e.username,placeholder:"username",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"password",value:e.password,placeholder:"password",onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Register"),r.a.createElement(c.b,{to:"/Login"},"Cancel")))}}]),t}(r.a.Component);var K=Object(o.b)(function(e){return{registering:e.registration.registering}})(z),M=function(e){function t(e){var n;return Object(G.a)(this,t),(n=Object(U.a)(this,Object(_.a)(t).call(this,e))).props.dispatch((localStorage.removeItem("user"),{type:C})),n.state={user:{username:"",password:""},submitted:!1},n.handleChange=n.handleChange.bind(Object(q.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(q.a)(n)),n}return Object(J.a)(t,e),Object(T.a)(t,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.user;console.log(r),this.setState({user:Object(H.a)({},r,Object(F.a)({},n,a))})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.user;t.username&&t.password&&this.props.dispatch(function(e){var t=function(e){return{type:y,payload:{user:e}}},n=function(e){return{type:E,payload:{user:e}}},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return function(){var r=Object(m.a)(p.a.mark(function r(s){var o;return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s(t(e)),r.prev=1,r.next=4,d()("".concat(window.location.origin,"/users/authenticate"),a).then(w);case 4:return o=r.sent,r.next=7,o.json();case 7:return e=r.sent,r.t0=s,r.t1=n,r.next=12,e;case 12:return r.t2=r.sent,r.t3=(0,r.t1)(r.t2),(0,r.t0)(r.t3),r.t4=localStorage,r.t5=JSON,r.next=19,e;case 19:r.t6=r.sent,r.t7=r.t5.stringify.call(r.t5,r.t6),r.t4.setItem.call(r.t4,"user",r.t7),f.push("/"),r.next=29;break;case 25:r.prev=25,r.t8=r.catch(1),console.log(r.t8),s((r.t8,{type:S}));case 29:case"end":return r.stop()}},r,null,[[1,25]])}));return function(e){return r.apply(this,arguments)}}()}(t))}},{key:"render",value:function(){this.props.registering;var e=this.state.user;return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"username",value:e.username,placeholder:"username",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"password",value:e.password,placeholder:"password",onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Sign In"),r.a.createElement(c.b,{to:"/register"},"Register")))}}]),t}(r.a.Component);var Q=Object(o.b)(function(e){return{loggedIn:e.authentication.loggedIn}})(M),V=(n(51),function(e){function t(e){var n;Object(G.a)(this,t);(n=Object(U.a)(this,Object(_.a)(t).call(this,e))).props.dispatch;return f.listen(function(e,t){console.log(t),console.log(e),console.log(f)}),n}return Object(J.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){return console.log(this.props),r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"SPA sLogin Boilerplate"),r.a.createElement(P.c,{history:f},r.a.createElement("div",null,r.a.createElement(B,{exact:!0,path:"/",component:D}),r.a.createElement(P.b,{path:"/login",component:Q}),r.a.createElement(P.b,{path:"/register",component:K})))))}}]),t}(r.a.Component));var W=Object(o.b)(function(e){return{init:e.init}})(V);Object(s.render)(r.a.createElement(o.a,{store:L},r.a.createElement(c.a,null,r.a.createElement(W,null))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.6ff00548.chunk.js.map